(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{510:function(a,s,t){"use strict";t.r(s);var e=t(55),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"为什么选择aspera"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么选择aspera"}},[a._v("#")]),a._v(" 为什么选择Aspera")]),a._v(" "),t("p",[a._v("国内从NCBI下载高通量测序数据时候，由于数据量比较大，下载速度是个瓶颈，高速下载软件Aspera可以批量下载SRA文件，因此对其进行安装。")]),a._v(" "),t("h2",{attrs:{id:"下载安装aspera-connect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载安装aspera-connect"}},[a._v("#")]),a._v(" 下载安装Aspera Connect")]),a._v(" "),t("p",[a._v("Aspera是IBM的快速下载工具，可以选择用压缩包安装和conda安装两种方式。我这里比较推荐用conda安装，因为在实际运行中发现aspera的版本有问题限制。")]),a._v(" "),t("p",[a._v("在这里，有一个小点就是，Aspera的安装是不能用root权限安装的，必须使用普通用户安装。")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://test-123-imagebed.oss-cn-beijing.aliyuncs.com/img/image-20200806095820401.png",alt:"image-20200806095820401"}})]),a._v(" "),t("p",[a._v("因此我们需要切换的普通用户进行conda安装。")]),a._v(" "),t("p",[a._v("首先先在conda中创造一个新的下载环境，然后激活环境")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("conda create -n download\nconda activate download\n")])])]),t("p",[a._v("在这个环境下安装相关包。")]),a._v(" "),t("div",{staticClass:"custom-block info"},[t("p",{staticClass:"custom-block-title"},[a._v("版本号的关联")]),a._v(" "),t("p",[a._v("在实际运行中发现能否成功，与perfetch和aspera的版本号十分密切。截止到2020年8月1日，以下版本的包是可以完美配合的。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("conda "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" sra-tools"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2.9")]),a._v(".6 -y\nconda "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -c hcc aspera-cli"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.7")]),a._v(".7\n")])])])]),a._v(" "),t("h2",{attrs:{id:"简单使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简单使用"}},[a._v("#")]),a._v(" 简单使用")]),a._v(" "),t("p",[a._v("安装完后，需要查看自己的安装路径")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("which")]),a._v(" ascp\n/usr/local//anaconda3/bin/ascp\n")])])]),t("p",[a._v("然后就可以在这个conda环境下进行下载了。")]),a._v(" "),t("p",[a._v("我们可以通过ascp的官方文件来查看相关参数信息")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("$ ascp -h\nUsage: ascp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("OPTION"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" SRC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(". DEST\n          SRC to DEST, or multiple SRC to DEST "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("dir")]),a._v("\n          SRC, DEST format: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("user@"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("host:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("PATH")]),a._v("\n  -h,--help                       Display usage\n  -A,--version                    Display version.\n  -T                              Disable encryption\n  -d                              Create target directory, implied "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("for")]),a._v(" file/file-pair lists\n  -p                              Preserve "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" timestamp\n  -q                              Disable progress display\n  -v                              Verbose mode\n  -6                              Use IPv6\n  -D"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("..")]),a._v(".                           Debug level\n  -l MAX-RATE                     Max transfer rate\n  ···\n")])])]),t("p",[a._v("主要用到的参数有这些")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("Aspera用法如下：\nUsage: ascp "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("参数"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" 目标文件 保存路径\n-v verbose mode 唠叨模式，能让你实时知道程序在干啥，方便查错。有些作者的程序缺乏人性化，运行之后，只见光标闪，压根不知道运行到哪了\n-T 取消加密，否则有时候数据下载不了\n-i 提供私钥文件的地址，不能少，地址一般是~/.aspera/connect/etc中的asperaweb_id_dsa.openssh文件\n-l 设置最大传输速度，一般200m到500m，如果不设置，反而速度会比较低，可能有个较低的默认值\n-k 断点续传，一般设置为值1\n-Q 一般加上它\n-P 提供SSH port，端口一般是33001，\n")])])]),t("p",[a._v("因此我们根据参数进行设置。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("ascp -k "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" -QT -l 300m -P33001 -i  /usr/local/anaconda3/envs/download/etc/asperaweb_id_dsa.openssh era-fasp@fasp.sra.ebi.ac.uk:/vol1/fastq/SRR103/004/SRR1039514/SRR1039514_2.fastq.gz "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("p",[a._v("可以看到下载速度就非常令人舒适了。")]),a._v(" "),t("p",[t("img",{attrs:{src:"http://test-123-imagebed.oss-cn-beijing.aliyuncs.com/img/image-20200829082844456.png",alt:"image-20200829082844456"}})]),a._v(" "),t("h2",{attrs:{id:"脚本批量下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#脚本批量下载"}},[a._v("#")]),a._v(" 脚本批量下载")]),a._v(" "),t("p",[a._v("待补充")]),a._v(" "),t("h2",{attrs:{id:"上传数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传数据"}},[a._v("#")]),a._v(" 上传数据")]),a._v(" "),t("p",[a._v("待补充")]),a._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[a._v("#")]),a._v(" 参考资料")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.jianshu.com/p/709924001d5d",target:"_blank",rel:"noopener noreferrer"}},[a._v("2020-05-11利用conda+aspera+prefetch下载GEO上的原始数据")])]),a._v(" "),t("p",[t("a",{attrs:{href:"https://blog.csdn.net/herokoking/article/details/78890567",target:"_blank",rel:"noopener noreferrer"}},[a._v("使用aspera下载.fastq.gz和.sra数据")])])])}),[],!1,null,null,null);s.default=n.exports}}]);